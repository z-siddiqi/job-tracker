from .base import *

# Database

DATABASES = {
    'default': env.dj_db_url(
        'DATABASE_URL', default='postgres://postgres@db/postgres'
    )
}


# Security

SECURE_SSL_REDIRECT = True
SECURE_HSTS_SECONDS = 2592000
SECURE_HSTS_INCLUDE_SUBDOMAINS = True
SECURE_HSTS_PRELOAD = True
SESSION_COOKIE_SECURE = True
CSRF_COOKIE_SECURE = True
SECURE_PROXY_SSL_HEADER = ('HTTP_X_FORWARDED_PROTO', 'https')


# Logging

LOGGING = {
  'version': 1,
  'disable_existing_loggers': False,
  'formatters': {
    'default': {
      'format': '[DJANGO] %(levelname)s %(asctime)s %(module)s '
      '%(name)s.%(funcName)s:%(lineno)s: %(message)s'
    },
  },

  'handlers': {
    'console': {
      'level': 'DEBUG',
      'class': 'logging.StreamHandler',
      'formatter': 'default',
    }
  },
  
  'loggers': {
    '*': {
      'handlers': ['console'],
      'level': 'DEBUG',
      'propagate': True,
    }
  },
}
